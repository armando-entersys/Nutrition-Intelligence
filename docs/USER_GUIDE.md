# User Guide - Nutrition Intelligence

## Table of Contents

- [Getting Started](#getting-started)
- [For Patients](#for-patients)
- [For Nutritionists](#for-nutritionists)
- [For Administrators](#for-administrators)
- [Common Features](#common-features)
- [FAQ](#faq)
- [Troubleshooting](#troubleshooting)

## Getting Started

### Creating an Account

1. Navigate to https://nutrition-intelligence.scram2k.com
2. Click **"Registrarse"** (Sign Up)
3. Fill in your information:
   - Email address
   - Full name
   - Password (minimum 8 characters)
   - Select your role: Patient, Nutritionist, or Admin
4. Click **"Crear Cuenta"**
5. Check your email for verification (if enabled)

### Logging In

1. Go to the login page
2. Enter your email and password
3. Click **"Iniciar SesiÃ³n"**
4. You'll be redirected to your dashboard based on your role

### Resetting Password

1. Click **"Â¿Olvidaste tu contraseÃ±a?"** on the login page
2. Enter your email address
3. Check your email for reset instructions
4. Follow the link and create a new password

---

## For Patients

Patients can track their nutrition, get AI-powered insights, and manage their health goals.

### Dashboard Overview

When you log in, you'll see:
- **Today's Summary**: Calories consumed, macros, goals
- **Recent Meals**: Your last 5 meals
- **Quick Actions**: Add meal, analyze photo, chat with AI
- **Progress Chart**: Weekly nutrition trends

### Features for Patients

#### 1. Food Diary (Recordatorio de 24 Horas)

Track everything you eat throughout the day.

**How to use:**

1. Click **"Recordatorio 24h"** in the menu
2. Click **"Agregar Alimento"**
3. Search for food:
   - Use the search bar
   - Browse by SMAE category
   - Scan a barcode (for packaged products)
4. Enter portion size
5. Select meal time (breakfast, lunch, snack, dinner)
6. Click **"Guardar"**

**Tips:**
- Log meals immediately after eating for better accuracy
- Use the camera icon to analyze photos with AI
- Check the nutrition summary at the bottom
- Compare with your daily goals

#### 2. AI Photo Analysis

Get instant nutrition information from food photos.

**How to use:**

1. Go to **"AnÃ¡lisis de Fotos IA"**
2. Take a photo or upload one:
   - **Camera**: Take a live photo of your meal
   - **Upload**: Select from your gallery
3. Wait 15-30 seconds for analysis
4. Review results:
   - **Dish Name**: Identified meal
   - **Ingredients**: Detected components with quantities
   - **Nutrition Info**: Complete breakdown
   - **NOM-051 Warnings**: Mexican labeling alerts
   - **Health Score**: Overall healthiness rating (0-100)
   - **Recommendations**: Personalized suggestions

**Tips:**
- Take photos in good lighting
- Show the entire meal in frame
- Include familiar objects for scale (fork, glass)
- Works best with Mexican dishes
- Results save to your food diary automatically

**Example Analysis:**

```
Dish: Tacos al Pastor
Region: Ciudad de MÃ©xico
Confidence: 95%

Ingredients:
â€¢ Carne de cerdo marinada: 150g (285 cal)
â€¢ Tortillas de maÃ­z: 3 piezas (192 cal)
â€¢ PiÃ±a: 30g (15 cal)
â€¢ Cebolla: 20g (8 cal)

Total Nutrition:
Calories: 492 kcal
Protein: 28g
Carbs: 45g
Fats: 22g
Fiber: 6g
Sodium: 650mg

NOM-051 Warnings:
â€¢ Exceso grasas saturadas
â€¢ Exceso sodio

Health Score: 72/100

Recommendations:
âœ“ Buena fuente de proteÃ­nas
âš  Moderada cantidad de sodio
ðŸ’¡ Considera reducir la porciÃ³n de carne
```

#### 3. Nutrition Calculator

Calculate your personalized nutritional needs.

**How to use:**

1. Go to **"Calculadora de Requerimientos"**
2. Enter your data:
   - **Age**: Your current age
   - **Gender**: Male/Female
   - **Weight**: In kilograms
   - **Height**: In centimeters
   - **Activity Level**:
     - Sedentary: Little or no exercise
     - Lightly active: 1-3 days/week
     - Moderately active: 3-5 days/week
     - Very active: 6-7 days/week
     - Extremely active: Athlete level
   - **Goal**:
     - Weight loss: -500 cal deficit
     - Maintenance: TDEE
     - Muscle gain: +300 cal surplus
3. Click **"Calcular"**
4. Review your personalized plan:
   - **BMR**: Basal Metabolic Rate
   - **TDEE**: Total Daily Energy Expenditure
   - **Target Calories**: Based on your goal
   - **Macro Distribution**: Protein, carbs, fats
   - **Recommendations**: Personalized advice

**Example Result:**

```
Your Nutritional Plan

BMR: 1,725 kcal/day
TDEE: 2,380 kcal/day
Target: 1,880 kcal/day (weight loss)

Macros Distribution:
Protein: 140g (560 cal) - 30%
Carbs: 188g (752 cal) - 40%
Fats: 63g (567 cal) - 30%

Recommendations:
â€¢ DÃ©ficit moderado de 500 calorÃ­as
â€¢ ProteÃ­na alta para preservar mÃºsculo
â€¢ 5-6 comidas pequeÃ±as al dÃ­a
â€¢ MÃ­nimo 2L de agua diaria
```

#### 4. Meal Plans

Generate and follow personalized meal plans.

**How to use:**

1. Go to **"Planes Alimenticios"**
2. Click **"Crear Nuevo Plan"**
3. Configure your plan:
   - Duration: 7, 14, or 30 days
   - Daily calories: Auto-filled from calculator
   - Meals per day: 3-6
   - Dietary restrictions: Vegetarian, gluten-free, etc.
   - Preferences: Breakfast type, snacks, etc.
4. Click **"Generar Plan"**
5. Review your weekly plan with:
   - Daily meal schedules
   - Shopping list
   - Prep instructions
   - Nutritional breakdown

**Following your plan:**
- Check off completed meals
- Swap recipes you don't like
- Export shopping list to print
- Track adherence percentage

#### 5. AI Nutrition Chat

Ask nutrition questions to the AI assistant.

**How to use:**

1. Click the **"Chat"** icon
2. Type your question in Spanish
3. Get instant, contextualized answers based on:
   - SMAE food database
   - NOM-051 product information
   - Your personal history
   - Mexican nutrition guidelines

**Example questions:**
- "Â¿CuÃ¡ntas calorÃ­as tiene una tortilla de maÃ­z?"
- "Â¿QuÃ© puedo comer en vez de pan dulce?"
- "Â¿Es saludable la Coca-Cola?"
- "Dame ideas de desayuno bajo en carbohidratos"
- "Â¿QuÃ© alimentos tienen mucha proteÃ­na?"

**Tips:**
- Ask specific questions
- Mention portion sizes
- Specify your dietary restrictions
- The AI remembers context within conversation

#### 6. Recipes

Browse and save healthy Mexican recipes.

**How to use:**

1. Go to **"Recetas"**
2. Browse or search:
   - Filter by category (breakfast, lunch, dinner, snacks)
   - Filter by difficulty (easy, medium, hard)
   - Filter by prep time
   - Filter by dietary restrictions
3. Click on a recipe to view:
   - Ingredients list
   - Step-by-step instructions
   - Nutrition information per serving
   - Prep and cook time
   - Difficulty level
   - User ratings
4. Actions:
   - **Favorite**: Save to your favorites
   - **Rate**: Give 1-5 stars
   - **Comment**: Share your experience
   - **Add to Plan**: Include in meal plan
   - **Share**: Send to friends

#### 7. Progress Tracking

Monitor your nutrition journey over time.

**How to view:**

1. Go to **"Mi Progreso"**
2. View charts:
   - **Weight Trend**: Track weight changes
   - **Calorie Adherence**: Daily vs. target
   - **Macro Distribution**: Protein/carbs/fats over time
   - **Meal Frequency**: Eating patterns
   - **Food Variety**: Diversity score
3. Set milestones and celebrate achievements

### Tips for Success (Patients)

- **Be Consistent**: Log meals every day
- **Be Honest**: Accuracy matters more than perfection
- **Use Photos**: Easier than manual entry
- **Ask Questions**: Use the AI chat for guidance
- **Review Weekly**: Check your progress on Sundays
- **Stay Hydrated**: Track water intake too
- **Sleep Well**: Nutrition isn't everything
- **Be Patient**: Results take time

---

## For Nutritionists

Nutritionists get professional tools to manage patients and create customized plans.

### Dashboard Overview

Your dashboard shows:
- **Patient Overview**: Active patients and appointments
- **Recent Activity**: Patient progress updates
- **Quick Actions**: Add patient, create plan, schedule consultation
- **Analytics**: Overall practice statistics

### Features for Nutritionists

#### 1. Patient Management

Manage your patient roster.

**Adding a patient:**

1. Go to **"Mis Pacientes"**
2. Click **"Agregar Paciente"**
3. Enter patient information:
   - Name, email, phone
   - Age, gender, height, initial weight
   - Medical history
   - Goals and preferences
   - Dietary restrictions
4. Click **"Guardar"**
5. Patient receives invitation email

**Viewing patient details:**

1. Click on patient name
2. View tabs:
   - **Profile**: Personal information
   - **History**: Consultation notes
   - **Progress**: Weight, measurements, photos
   - **Meal Plans**: Active and past plans
   - **Food Diary**: What they're eating
   - **Analytics**: Adherence, trends

#### 2. Consultations

Document patient consultations.

**Creating a consultation note:**

1. Open patient profile
2. Click **"Nueva Consulta"**
3. Record:
   - **Date and time**
   - **Weight and measurements**: Body comp, BP, etc.
   - **Subjective**: Patient's complaints/concerns
   - **Objective**: Physical findings
   - **Assessment**: Your professional evaluation
   - **Plan**: Treatment plan, follow-up
   - **Dietary prescription**: Calories, macros
4. Attach files: Labs, photos, etc.
5. Click **"Guardar Consulta"**

**Consultation templates:**

Use templates for common scenarios:
- Initial consultation
- Follow-up (weight loss)
- Follow-up (muscle gain)
- Medical condition (diabetes, hypertension)
- Sports nutrition

#### 3. Creating Meal Plans for Patients

Design customized nutrition plans.

**How to create:**

1. Open patient profile
2. Go to **"Planes Alimenticios"** tab
3. Click **"Crear Nuevo Plan"**
4. Configure:
   - **Duration**: Days or weeks
   - **Calorie target**: Based on your calculation
   - **Macro distribution**: Custom percentages
   - **Meal timing**: Specific times if needed
   - **Food preferences**: What they like/dislike
   - **Restrictions**: Allergies, intolerances
   - **Budget**: Low, medium, high
5. Click **"Generar Plan"**
6. Review and customize:
   - Swap meals
   - Adjust portions
   - Add specific instructions
   - Include supplements
7. **Approve and assign** to patient
8. Patient receives notification

**Plan types:**
- Weight loss
- Muscle gain
- Maintenance
- Medical nutrition therapy (diabetes, PCOS, etc.)
- Sports nutrition
- Vegetarian/vegan

#### 4. AI Chat Assistant for Nutritionists

Use AI to quickly look up nutrition information.

**How it helps:**

1. Click **"Chat IA"** button
2. Ask professional questions:
   - "Â¿CuÃ¡nta proteÃ­na necesita un hombre de 75kg para ganar mÃºsculo?"
   - "Â¿QuÃ© alimentos son altos en hierro?"
   - "Dame opciones de desayuno para diabÃ©tico"
   - "Â¿CuÃ¡ntas calorÃ­as quema una mujer de 60kg corriendo?"
3. Get instant answers with sources
4. Copy responses to consultation notes

**Benefits:**
- Faster consultations
- Evidence-based answers
- Stay updated on SMAE data
- Compare products quickly

#### 5. Progress Monitoring

Track patient outcomes.

**How to monitor:**

1. Open patient profile
2. Go to **"Progreso"** tab
3. View:
   - **Weight chart**: Trend over time
   - **Adherence score**: Plan compliance %
   - **Food diary review**: What they're eating
   - **Photo comparisons**: Before/after
   - **Measurements**: Body composition changes
   - **Lab results**: If uploaded
4. Add notes and feedback
5. Schedule follow-up based on progress

**Red flags to watch:**
- Sudden weight loss/gain
- Low adherence (<50%)
- Missed check-ins
- Concerning food patterns

#### 6. Reports and Analytics

Generate professional reports.

**Available reports:**

1. **Patient Progress Report**:
   - Weight history
   - Adherence metrics
   - Nutrition analysis
   - Recommendations
2. **Consultation Summary**:
   - All consultation notes
   - Treatment timeline
   - Outcomes
3. **Practice Analytics**:
   - Total patients
   - Active/inactive
   - Success rates
   - Revenue (if integrated)

**Exporting:**
- PDF for printing
- Email to patient
- Share with other providers (with consent)

### Tips for Nutritionists

- **Document Everything**: Detailed notes protect you legally
- **Set Realistic Goals**: Sustainable changes > quick fixes
- **Use Evidence**: Reference SMAE and NOM-051 data
- **Communicate Clearly**: Explain WHY, not just WHAT
- **Follow Up**: Regular check-ins improve adherence
- **Stay Updated**: Review new features and data
- **Use Templates**: Save time on common scenarios
- **Leverage AI**: Quick lookups during consultations

---

## For Administrators

Administrators manage the platform, users, and system settings.

### Dashboard Overview

Admin dashboard shows:
- **System Health**: Server status, uptime, errors
- **User Statistics**: Total users by role
- **Activity Metrics**: API calls, logins, features used
- **Content Management**: Foods, products, recipes
- **Security Alerts**: Failed logins, suspicious activity

### Features for Administrators

#### 1. User Management

Manage all users on the platform.

**Viewing users:**

1. Go to **"Usuarios"**
2. View list with:
   - Name, email, role
   - Account status
   - Created date
   - Last login
3. Filter by role, status, or date
4. Search by name or email

**Managing a user:**

1. Click on user
2. Actions available:
   - **View Profile**: See full details
   - **Edit**: Modify information
   - **Change Role**: Promote/demote
   - **Suspend**: Temporarily disable
   - **Delete**: Permanently remove (use carefully)
   - **Reset Password**: Force password reset
   - **View Activity**: Login history, API usage

#### 2. Content Management

Manage the nutrition database.

**Managing SMAE Foods:**

1. Go to **"Alimentos SMAE"**
2. Actions:
   - **Add**: New food entry
   - **Edit**: Update nutrition info
   - **Verify**: Mark as verified
   - **Delete**: Remove (if duplicate)
3. Bulk import: Upload CSV with foods

**Managing NOM-051 Products:**

1. Go to **"Productos NOM-051"**
2. View global products database
3. Actions:
   - **Verify**: Confirm accuracy
   - **Edit**: Update nutrition info
   - **Merge**: Combine duplicates
   - **Flag**: Mark for review
4. View statistics:
   - Total products
   - Scan counts
   - Most popular

**Managing Recipes:**

1. Go to **"Recetas"**
2. Actions:
   - **Add**: New recipe
   - **Edit**: Update ingredients/instructions
   - **Feature**: Highlight on homepage
   - **Delete**: Remove (if inappropriate)
3. Review user-submitted recipes

#### 3. System Monitoring

Monitor platform health and performance.

**Checking system status:**

1. Go to **"Monitoreo"**
2. View metrics:
   - **CPU Usage**: Server load
   - **Memory**: RAM consumption
   - **Disk Space**: Storage used
   - **Database**: Query performance
   - **Cache**: Hit/miss rates
   - **API**: Response times
3. View alerts for issues
4. Access Grafana dashboards

**Viewing logs:**

1. Go to **"Logs"**
2. Filter by:
   - Service (backend, frontend, db)
   - Level (info, warning, error)
   - Date range
   - Search term
3. Export logs for analysis

**Performance metrics:**

- Average response time
- Requests per minute
- Error rate
- User sessions
- Cache hit rate

#### 4. Security Management

Manage security settings and incidents.

**Security dashboard:**

1. Go to **"Seguridad"**
2. View:
   - **Failed Logins**: Potential brute force attempts
   - **Rate Limit Hits**: API abuse attempts
   - **Suspicious IPs**: Blocked addresses
   - **JWT Revocations**: Invalidated tokens
3. Take action:
   - Block IP address
   - Force user logout
   - Require password reset
   - Enable 2FA (when available)

**Configuring security:**

1. Go to **"ConfiguraciÃ³n"** â†’ **"Seguridad"**
2. Settings:
   - **Password Policy**: Minimum length, complexity
   - **Session Timeout**: Inactivity limit
   - **Rate Limits**: API call limits
   - **Allowed IPs**: Whitelist (optional)
   - **2FA**: Enable two-factor authentication

#### 5. System Configuration

Configure platform settings.

**General settings:**

- **Site Name**: "Nutrition Intelligence"
- **Support Email**: Contact email
- **Timezone**: America/Mexico_City
- **Language**: Spanish (primary)
- **Maintenance Mode**: On/off

**AI Configuration:**

- **Gemini API Key**: Google AI Studio key
- **Claude API Key**: Anthropic key (optional)
- **Vision Model**: Gemini/Claude/Hybrid
- **RAG Model**: Gemini Flash settings
- **Confidence Threshold**: Hybrid mode trigger

**Feature Flags:**

- **AI Photo Analysis**: Enable/disable
- **RAG Chat**: Enable/disable
- **Meal Plans**: Enable/disable
- **Social Features**: Comments, ratings
- **Mobile App**: API access for mobile

**Email Settings:**

- **SMTP Server**: Mail server
- **From Address**: noreply@nutrition-intelligence.com
- **Templates**: Welcome, password reset, etc.

#### 6. Analytics and Reporting

View platform analytics.

**Usage analytics:**

1. Go to **"AnalÃ­ticas"**
2. View metrics:
   - **Daily Active Users (DAU)**
   - **Monthly Active Users (MAU)**
   - **New Registrations**: Growth rate
   - **Feature Usage**: Most used features
   - **AI API Calls**: Gemini/Claude usage
   - **Database Growth**: Storage trends
3. Export reports (PDF, CSV)

**Business metrics:**

- User retention rate
- Conversion funnel (if applicable)
- Revenue (if monetized)
- Cost per user (API costs)

### Tips for Administrators

- **Monitor Daily**: Check system health every morning
- **Backup Regularly**: Ensure automated backups work
- **Update Promptly**: Keep system and dependencies updated
- **Review Logs**: Weekly log analysis prevents issues
- **User Feedback**: Review support tickets and feature requests
- **Security First**: Regular security audits
- **Document Changes**: Keep changelog updated
- **Communicate**: Notify users of maintenance windows

---

## Common Features

These features are available to all users regardless of role.

### Profile Management

**Editing your profile:**

1. Click your avatar (top right)
2. Select **"Mi Perfil"**
3. Update information:
   - Full name
   - Email (requires verification)
   - Phone number
   - Profile photo
   - Bio/description
   - Preferences
4. Click **"Guardar Cambios"**

### Changing Password

1. Go to **"Mi Perfil"**
2. Click **"Cambiar ContraseÃ±a"**
3. Enter:
   - Current password
   - New password
   - Confirm new password
4. Click **"Actualizar"**

### Notifications

**Managing notifications:**

1. Go to **"ConfiguraciÃ³n"** â†’ **"Notificaciones"**
2. Toggle preferences:
   - Email notifications
   - Push notifications (if enabled)
   - Notification types:
     - New messages
     - Plan updates
     - Appointment reminders
     - System alerts

### Privacy Settings

**Controlling your data:**

1. Go to **"ConfiguraciÃ³n"** â†’ **"Privacidad"**
2. Options:
   - **Profile Visibility**: Public/private
   - **Data Sharing**: Opt in/out of analytics
   - **Download Data**: Export your information
   - **Delete Account**: Permanent deletion

---

## FAQ

### General Questions

**Q: Is my data secure?**
A: Yes. We use industry-standard encryption (HTTPS), secure authentication (JWT), and regular security audits. Your data is never shared without permission.

**Q: Can I use the app offline?**
A: Currently, no. Internet connection is required. Offline mode is planned for v1.1.

**Q: What browsers are supported?**
A: Chrome, Firefox, Safari, Edge (latest 2 versions). Mobile browsers also supported.

**Q: Is there a mobile app?**
A: Not yet. The website is mobile-friendly. Native apps are planned for v1.2.

### For Patients

**Q: How accurate is the AI photo analysis?**
A: Gemini Vision has ~90-95% accuracy for common Mexican dishes. Always verify and adjust portions as needed.

**Q: Can I track exercise?**
A: Exercise tracking is planned for v1.1. For now, factor it into your activity level in the calculator.

**Q: How often should I log meals?**
A: Daily logging provides the best insights. At minimum, log 3-4 days per week.

**Q: Can I share my food diary with my nutritionist?**
A: Yes! Your nutritionist can view all your data if you're their patient.

### For Nutritionists

**Q: How many patients can I manage?**
A: No limit. However, we recommend <50 active patients for optimal care quality.

**Q: Can I import my existing patient list?**
A: Yes. Contact support for bulk import via CSV.

**Q: How do I get paid?**
A: The platform doesn't currently handle payments. Manage that separately with your patients.

**Q: Can patients book appointments through the platform?**
A: Appointment booking is planned for v1.1.

### For Administrators

**Q: How do I backup the database?**
A: Backups are automated daily. See [DEPLOYMENT.md](DEPLOYMENT.md) for manual backup instructions.

**Q: What's the server capacity?**
A: Current server (e2-standard-2) handles ~1000 concurrent users. Scale up as needed.

**Q: How do I add more SMAE foods?**
A: Use the admin panel to add individually or bulk import via CSV.

---

## Troubleshooting

### Common Issues

#### I can't log in

**Solutions:**
1. Verify email and password (case-sensitive)
2. Clear browser cache and cookies
3. Try password reset
4. Check if account is suspended (contact admin)
5. Try a different browser

#### AI photo analysis is slow/failing

**Solutions:**
1. Check internet connection
2. Try a different photo (better lighting)
3. Reduce image size (<5MB)
4. Wait and retry (API may be temporarily busy)
5. Report to support if persists

#### Food not found in search

**Solutions:**
1. Try different search terms (e.g., "maÃ­z" instead of "corn")
2. Check spelling
3. Browse by category instead
4. Use photo analysis instead
5. Request food addition (support or nutritionist)

#### Meal plan not generating

**Solutions:**
1. Verify all required fields are filled
2. Check calorie target is reasonable (1200-4000)
3. Reduce dietary restrictions (may be too limiting)
4. Try shorter duration (7 days instead of 30)
5. Clear cache and retry

#### Charts/graphs not showing

**Solutions:**
1. Ensure you have at least 3 days of data
2. Refresh the page
3. Clear browser cache
4. Try a different browser
5. Check if JavaScript is enabled

### Error Messages

**"Invalid credentials"**
- Wrong email or password
- Try password reset

**"Token expired"**
- Session timed out
- Log in again

**"Rate limit exceeded"**
- Too many requests
- Wait 1 minute and retry
- Contact support if frequent

**"Server error (500)"**
- Temporary server issue
- Retry in a few minutes
- Check [status page] if available
- Report if persists

**"Not found (404)"**
- Resource doesn't exist
- Check URL
- Item may have been deleted

### Getting Help

1. **Documentation**: Check all docs in [docs/](https://github.com/usuario/nutrition-intelligence/tree/main/docs) folder
2. **FAQ**: Re-read FAQ section above
3. **Support Email**: soporte@ejemplo.com
4. **GitHub Issues**: Report bugs at [GitHub Issues](https://github.com/usuario/nutrition-intelligence/issues)
5. **Community**: Join our Discord/Slack (if available)

**When reporting issues, include:**
- Your role (patient/nutritionist/admin)
- Browser and OS
- Steps to reproduce
- Screenshots (if helpful)
- Error messages (exact text)

---

**Last Updated**: 2025-11-11
**User Guide Version**: 1.0.0
**Platform Version**: 1.0.0

**Happy tracking!** ðŸŒ®ðŸ¥‘ðŸ“
