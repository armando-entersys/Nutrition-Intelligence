# ============================================================================
# Nutrition Intelligence Backend - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git (it's in .gitignore)
# ============================================================================

# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
# Environment type: development | staging | production
ENVIRONMENT=development

# Enable debug mode (true/false) - Should be false in production
DEBUG=true

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# SQLite for development (default):
DATABASE_URL=sqlite+aiosqlite:///./nutrition_intelligence.db

# PostgreSQL for production (recommended):
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/nutrition_intelligence

# MySQL/MariaDB alternative:
# DATABASE_URL=mysql+aiomysql://user:password@localhost:3306/nutrition_intelligence

# Enable SQL query logging (helpful for debugging, disable in production)
DATABASE_ECHO=false

# ============================================================================
# REDIS CONFIGURATION (Optional - for caching and sessions)
# ============================================================================
# Local Redis:
REDIS_URL=redis://localhost:6379/0

# Redis Cloud:
# REDIS_URL=rediss://username:password@hostname:port/0

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# SECRET_KEY - MUST be at least 32 characters
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# CHANGE THIS IN PRODUCTION!
SECRET_KEY=development-secret-key-for-local-testing-only-change-in-production-minimum-32-chars

# JWT token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=30

# Encryption algorithm for JWT
ALGORITHM=HS256

# ============================================================================
# API CONFIGURATION
# ============================================================================
# Allowed hosts for security middleware (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# CORS Origins - Frontend development servers (comma-separated)
# Port 3005 is the default for this project
# Include all ports where frontend might run
CORS_ORIGINS=http://localhost:3000,http://localhost:3005,http://localhost:3001,http://localhost:3002,http://127.0.0.1:3000,http://127.0.0.1:3005,http://127.0.0.1:3001,http://127.0.0.1:3002

# For production, add your production domain:
# CORS_ORIGINS=https://nutrition-intelligence.com,https://www.nutrition-intelligence.com

# ============================================================================
# AI VISION SERVICES
# ============================================================================
# Google Gemini API Key
# Get from: https://ai.google.dev/ (FREE for development)
# Leave as default or blank if not using Gemini
GOOGLE_API_KEY=your-google-gemini-api-key-here

# Anthropic Claude API Key
# Get from: https://console.anthropic.com/settings/keys (Pay-as-you-go)
# Leave as default or blank if not using Claude
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# AI Vision Model Selection
# Options: gemini | claude | hybrid
#
# - gemini: Use only Gemini (fast & cheap, ~$0.35/1M tokens)
# - claude: Use only Claude (max precision, ~$3/1M tokens)
# - hybrid: Gemini first, Claude fallback if confidence low (best balance)
AI_VISION_MODEL=gemini

# Confidence threshold for hybrid mode (0-100)
# If Gemini confidence < threshold, use Claude as fallback
# Recommended: 75 (85% cost savings vs Claude-only)
AI_VISION_CONFIDENCE_THRESHOLD=75

# ============================================================================
# EXTERNAL SERVICES (Optional)
# ============================================================================
# Google Cloud Storage - For storing user photos
# GCS_BUCKET=nutrition-intelligence-photos

# SendGrid - For transactional emails
# SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Twilio - For WhatsApp messaging
# Get from: https://www.twilio.com/console
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================
# SMTP Server for sending emails
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# ============================================================================
# RATE LIMITING
# ============================================================================
# Maximum requests per window
RATE_LIMIT_REQUESTS=100

# Time window in seconds
RATE_LIMIT_WINDOW=60

# ============================================================================
# COMPLIANCE & DATA RETENTION
# ============================================================================
# Data retention period in days (default: 7 years = 2555 days)
# Required for Mexican healthcare data regulations
DATA_RETENTION_DAYS=2555

# Enable audit logging for compliance
AUDIT_LOG_ENABLED=true

# ============================================================================
# MONITORING & OBSERVABILITY (Optional)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://xxxxxxxxxxxxx@sentry.io/xxxxxxx

# OpenTelemetry exporter endpoint
# OTEL_EXPORTER_ENDPOINT=http://localhost:4318

# ============================================================================
# PRODUCTION SETTINGS
# ============================================================================
# When deploying to production, make sure to:
#
# 1. Change SECRET_KEY to a strong random value
# 2. Set DEBUG=false
# 3. Set ENVIRONMENT=production
# 4. Use PostgreSQL instead of SQLite
# 5. Update ALLOWED_HOSTS to your domain
# 6. Update CORS_ORIGINS to your frontend domain(s)
# 7. Enable HTTPS only
# 8. Configure proper logging and monitoring
# 9. Set up regular database backups
# 10. Review and test all security settings
# ============================================================================
